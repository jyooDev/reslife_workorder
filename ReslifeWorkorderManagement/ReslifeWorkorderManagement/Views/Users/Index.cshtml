@model Dictionary<string, List<ReslifeWorkorderManagement.Models.StaffVM>>

@{
    ViewData["Title"] = "Staffs";
    Layout = "_Staff-Layout";
}

<div id="PlaceHolderHere"></div>

<div class="wrapper">
    <div class="d-flex justify-content-between align-items-center heading-line">
        <h1>Staffs</h1>
    </div>
    <div class="staff-layout">
        <div class="left-section">
            <div class="staff-table">
                <h3>Administrator</h3>
                <table id="staffsTable">
                    <thead id="StaffsTableHead">
                        <tr>
                            <th>
                                Name
                            </th>
                            <th>
                                Email
                            </th>
                    
                            <th class="action">
                                Action
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var staff in Model["Administrators"])
                        {
                            <tr>
                                <td>
                                    @staff.user.FirstName @staff.user.LastName                        
                                </td>
                                <td>
                                    @staff.user.Email                        
                                </td>
                                <td data-cell="action">
                                    <a asp-controller="Users" asp-action="Edit" asp-route-id="@staff.user.Id" class="edit-icon-btn">
                                        <i class="bi bi-pencil edit-icon"></i>
                                    </a>
                                    <button data-toggle="modal" data-url="@Url.Action("Delete", "Users", new { id = staff.user.Id })" class="delete-icon-btn">
                                        <i class="bi bi-trash details-icon"></i>
                                    </button>
                                </td>
                            </tr>
                        }
                        <tr class="add-staff-tr">
                            <td colspan="3" class="add-staff">
                                <button data-toggle="modal" data-url="@Url.Action("Create", "Users", new { role = "administrator" })" class="add-staff-btn">
                                    + Add Staff
                                </button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="staff-table">
                <h3>Student Supervisor</h3>
                <table id="staffsTable">
                    <thead id="StaffsTableHead">
                        <tr>
                            <th>
                                Name
                            </th>
                            <th>
                                Email
                            </th>

                            <th class="action">
                                Action
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var staff in Model["StudentSupervisors"])
                        {
                            <tr>
                                <td>
                                    @staff.user.FirstName @staff.user.LastName
                                </td>
                                <td>
                                    @staff.user.Email
                                </td>
                                <td data-cell="action">
                                    <a asp-controller="Users" asp-action="Edit" asp-route-id="@staff.user.Id" class="edit-icon-btn">
                                        <i class="bi bi-pencil edit-icon"></i>
                                    </a>
                                    <button data-toggle="modal" data-url="@Url.Action("Delete", "Users", new { id = staff.user.Id })" class="delete-icon-btn">
                                        <i class="bi bi-trash details-icon"></i>
                                    </button>
                                </td>
                            </tr>
                        }
                        <tr class="add-staff-tr">
                            <td colspan="3" class="add-staff">
                                <button data-toggle="modal" data-url="@Url.Action("Create", "Users", new { role = "studentSupervisor" })" class="add-staff-btn">
                                    + Add Staff
                                </button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <div class="right-section">
            <div class="staff-table">
                <h3>Maintenance Staff</h3>
                <table id="staffsTable">
                    <thead id="StaffsTableHead">
                        <tr>
                            <th>
                                Name
                            </th>
                            <th>
                                Email
                            </th>
                            <th class="action">
                                Action
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var staff in Model["MaintenanceStaffs"])
                        {
                            <tr>
                                <td>
                                    @staff.user.FirstName @staff.user.LastName
                                </td>
                                <td>
                                    @staff.user.Email
                                </td>
                                <td data-cell="action">
                                    <a asp-controller="Users" asp-action="Edit" asp-route-id="@staff.user.Id" class="edit-icon-btn">
                                        <i class="bi bi-pencil edit-icon"></i>
                                    </a>
                                    <button data-toggle="modal" data-url="@Url.Action("Delete", "Users", new { id = staff.user.Id })" class="delete-icon-btn">
                                        <i class="bi bi-trash details-icon"></i>
                                    </button>
                                </td>
                            </tr>

                        }
                        <tr class="add-staff-tr">
                            <td colspan="3" class="add-staff">
                                <button data-toggle="modal" data-url="@Url.Action("Create", "Users", new { role = "maintenanceStaff" })" class="add-staff-btn">
                                    + Add Staff
                                </button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="staff-table">
                <h3>Desk Staff</h3>
                <table id="staffsTable">
                    <thead id="StaffsTableHead">
                        <tr>
                            <th>
                                Name
                            </th>
                            <th>
                                Email
                            </th>
                            <th class="action">
                                Action
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var staff in Model["DeskStaffs"])
                        {
                            <tr>
                                <td>
                                    @staff.user.FirstName @staff.user.LastName
                                </td>
                                <td>
                                    @staff.user.Email
                                </td>
                                <td data-cell="action">
                                    <a asp-controller="Users" asp-action="Edit" asp-route-id="@staff.user.Id" class="edit-icon-btn">
                                        <i class="bi bi-pencil edit-icon"></i>
                                    </a>
                                    <button data-toggle="modal" data-url="@Url.Action("Delete", "Users", new { id = staff.user.Id })" class="delete-icon-btn">
                                        <i class="bi bi-trash details-icon"></i>
                                    </button>
                                </td>
                            </tr>
                        }
                        <tr class="add-staff-tr">
                            <td colspan="3" class="add-staff">
                                <button data-toggle="modal" data-url="@Url.Action("Create", "Users", new { role = "deskStaff"})" class="add-staff-btn">
                                    + Add Staff
                                </button>                                
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<style>
    .add-staff{
        align-items: center;
        justify-content: center;
        background-color: none;
        padding:0;
        border-bottom-left-radius: 10px;
        border-bottom-right-radius: 10px;
    }

    .add-staff-btn{
        width: 100%;
        height: 100%; 
        margin: 0; 
        border: none;
        align-items: center;
        border-bottom-left-radius: 10px;
        border-bottom-right-radius: 10px;
        padding: 0.5rem;
        background-color: var(--yellow-primary);
    }

    .add-staff-btn:hover{
        background-color: var(--yellow-primary-dark);
    }
    .staff-layout{
        display: grid;
        grid-template-columns: 1fr 1fr;

        @@media screen and (max-width: 768px){
            grid-template-columns: 1fr;
        }
    }

    .staff-table{
        margin-top: 2rem;
        margin: 1rem;
    }
    .edit-icon-btn {
        border-radius: 10%;
        margin: 2px;
        padding: 0.3rem 0.3rem;
        border: none;
        box-shadow: none;
        color: white;
        background-color: #303030;
    }

    .delete-icon-btn {
        border-radius: 10%;
        margin: 2px;
        padding: 0.3rem 0.3rem;
        border: none;
        color: white;
        background-color: #303030;
    }

    table {
        background-color: #f7f7f7;
        color: black;
        border-radius: 10px;
        width: 100%;
        box-shadow: var(--box-shadow);
    }

    th,
    td {
        padding: 1rem;
        width: 40%;
    }

    .action {
        width: 20%;
    }

    thead {
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        position: sticky;
        border-top-left-radius: 10px;
        border-top-right-radius: 10px;
    }

    th {
        position: sticky;
        text-align: left;
    }

    th:first-child {
        border-top-left-radius: 10px;
    }

    th:last-child {
        border-top-right-radius: 10px;
    }
  
</style>

<script>
    if ('@(User.IsInRole("DeskStaff"))' === 'True') {

        const DeleteButtons = document.querySelectorAll(".delete-icon-btn");
        DeleteButtons.forEach((DeleteButton) => {
            DeleteButton.style.visibility = 'hidden';
        });

        const AddButtons = document.querySelectorAll(".add-staff-tr");
        AddButtons.forEach((AddButton) => {
            AddButton.remove();
        });

        const EditButtons = document.querySelectorAll(".edit-icon-btn");
        EditButtons.forEach((EditButton) => {
            EditButton.style.visibility = 'hidden';
        });

        const tableHeads = document.querySelectorAll("th");
        tableHeads.forEach((head) => {
            head.style.backgroundColor = "var(--yellow-primary)";
            console.log(head);
        })
    };
</script>